"use strict";(self.webpackChunkaccounts_frontend=self.webpackChunkaccounts_frontend||[]).push([[837],{7699:function(e,r,t){t.d(r,{Fp:function(){return c},JS:function(){return n},Y_:function(){return i},bj:function(){return l},hQ:function(){return a}});var n="GROUP_LIST_REFRESH",a="ACCOUNT_LIST_REFRESH",i="TRANSACTION_LIST_REFRESH",c="BANK_TRANSACTION_LIST_REFRESH",l="USER_LIST_REFRESH"},8837:function(e,r,t){t.r(r),t.d(r,{default:function(){return E}});var n=t(2791),a=t(6871),i=t(8683),c=t(5861),l=t(885),s=t(7757),o=t.n(s),d=t(5705),u=t(7953),m=t(4286),p=t(919),h=t(9025),f=t(989),v=t(5854),x=t(3014),b=t(7201),j=t(31),A=t(3829),N=t(1848),g=t(7699),w=t(7436),D=t(7145),y=t(1063),S=t(184);var R=function(){var e,r,t,s,R=(0,a.UO)(),E=(0,a.s0)(),O=(0,n.useState)(!0),C=(0,l.Z)(O,2),F=C[0],k=C[1],T=(0,n.useState)(!0),_=(0,l.Z)(T,2),B=_[0],L=_[1],P=(0,n.useState)(!1),Z=(0,l.Z)(P,2),q=Z[0],H=Z[1],I=(0,n.useState)([]),V=(0,l.Z)(I,2),Y=V[0],K=V[1],z=(0,n.useContext)(w.Il),U=(0,n.useContext)(w.St),X=(0,n.useState)([]),W=(0,l.Z)(X,2),G=W[0],J=W[1],Q=(0,n.useRef)(),M=((0,n.useRef)(),(0,n.useRef)()),$=null!==U&&void 0!==U&&null!==(e=U.user)&&void 0!==e&&e.finYearStart?new Date(null===U||void 0===U||null===(r=U.user)||void 0===r?void 0:r.finYearStart):void 0,ee=null!==U&&void 0!==U&&null!==(t=U.user)&&void 0!==t&&t.finYearEnd?new Date(null===U||void 0===U||null===(s=U.user)||void 0===s?void 0:s.finYearEnd):void 0,re=new Date;re.setHours(0,0,0,0);var te=(0,d.TA)({initialValues:{_id:"",trnxDate:re,fromAcc:void 0,toAcc:void 0,desc:"",rno:"",received:0,paid:0},initialTouched:{trnxDate:!0},validationSchema:u.Ry().shape({trnxDate:u.hT().nullable().required("Transaction Date is required"),fromAcc:u.Z_().required("From account is requried"),toAcc:u.Z_().required("To account is requried").notOneOf([u.iH("fromAcc")],"To and From Account cannot be same"),desc:u.Z_().required("Description is required"),rno:u.Z_(),received:u.Rx().nullable(),paid:u.Rx().nullable()}).test((function(e,r){if(e.paid&&e.received){var t=[];return t.push(r.createError({message:"Should not enter both paid and received amounts",path:"received"})),t.push(r.createError({message:"Should not enter both paid and received amounts",path:"paid"})),new u.p8(t)}if(!e.paid&&!e.received){var n=[];return n.push(r.createError({message:"Received or Paid amount must be more than 0",path:"received"})),n.push(r.createError({message:"Received or Paid amount must be more than 0",path:"paid"})),new u.p8(n)}return!0})),onSubmit:function(){var e=(0,c.Z)(o().mark((function e(r,t){var n,a,i,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setErrors,null===z||void 0===z||z.setDisplayLoader(!0),(n=Object.assign({},r)).paid=n.paid||0,n.received=n.received||0,e.prev=5,!B){e.next=14;break}return delete n._id,e.next=10,(0,j._X)(n);case 10:a=e.sent,null===z||void 0===z||z.setDisplayLoader(!1),e.next=23;break;case 14:return i=n._id,delete n._id,e.next=18,(0,j.Ld)(n,i);case 18:return a=e.sent,null===z||void 0===z||z.setDisplayLoader(!1),c={title:"Success",message:a.data.msg,type:A.Xo.SUCCESS,onClose:function(){ne(!0)}},(0,A.wp)(c),e.abrupt("return");case 23:n._id=a.data.id,J((function(e){return[].concat(e).concat([n])})),ie(n),e.next=33;break;case 28:e.prev=28,e.t0=e.catch(5),null===z||void 0===z||z.setDisplayLoader(!1),l={title:"Error",message:e.t0,type:A.Xo.ERROR},(0,A.wp)(l);case 33:case"end":return e.stop()}}),e,null,[[5,28]])})));return function(r,t){return e.apply(this,arguments)}}()});(0,n.useEffect)((function(){var e=function(){var e=(0,c.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.uj)();case 3:r=e.sent,K(r.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),K([]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,n.useEffect)((function(){if(R.id){L(!1);var e=function(){var e=(0,c.Z)(o().mark((function e(){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.fo)(R.id);case 3:r=e.sent,te.setValues((0,i.Z)((0,i.Z)({},r.data),{},{trnxDate:new Date(r.data.trnxDate)})),H(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t={title:"Error",message:e.t0,type:A.Xo.ERROR},(0,A.wp)(t);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}else L(!0)}),[R.id,te.setValues]);var ne=function(e){e&&N.YB.dispatch(g.Y_),k(!1),E(-1)},ae=(0,S.jsx)("div",{children:(0,S.jsx)(p.z,{label:"Close",icon:"pi pi-times",onClick:function(){return ne()}})}),ie=function(e){var r=null!==e&&void 0!==e?e:te.values,t=r._id,n=r.fromAcc,a=r.trnxDate;te.resetForm({values:{_id:t,trnxDate:a,fromAcc:n,toAcc:void 0,desc:"",rno:"",received:0,paid:0},touched:{trnxDate:!0,fromAcc:!0}}),(0,N.Ev)(Q)},ce=function(e){return!(!te.touched[e]||!te.errors[e])},le=function(e){return ce(e)&&(0,S.jsx)("small",{className:"p-error",children:te.errors[e]})},se=function(e,r){return e?(0,S.jsx)("span",{children:e.code+" - "+e.firmName}):(0,S.jsx)("span",{children:r.placeholder})},oe=function(e){return(0,S.jsx)("span",{children:e.code+" - "+e.firmName})},de=function(e,r){return(0,N.dN)(e[r])};function ue(){H((function(e){return!e}))}return(0,S.jsx)(m.V,{visible:F,modal:!0,closeOnEscape:!1,header:"Transaction - ".concat(B?"Create":"Edit"),footer:ae,onHide:ne,style:{width:"100vw",height:"100vh"},blockScroll:!0,children:(0,S.jsxs)("div",{className:"p-2",children:[(0,S.jsxs)("form",{className:"p-fluid",children:[(0,S.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,S.jsxs)("div",{className:"field",children:[(0,S.jsxs)("label",{htmlFor:"trnxDate",className:"block mb-2",children:[(0,S.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Transaction Date"]}),(0,S.jsx)(b.f,{name:"trnxDate",id:"trnxDate",value:te.values.trnxDate,onChange:function(e){te.setFieldValue("trnxDate",e.target.value)},onSelect:function(){(0,N.Ev)(Q)},onBlur:te.handleBlur,className:(0,v.AK)({"p-invalid":ce("trnxDate"),"p-inputtext-sm":!0}),placeholder:"Trnx. Date",required:!0,disabled:!B||q,dateFormat:"dd/mm/yy",minDate:$,maxDate:ee,monthNavigator:!0,yearNavigator:!0,yearRange:"".concat(null===$||void 0===$?void 0:$.getFullYear(),":").concat(null===ee||void 0===ee?void 0:ee.getFullYear()),mask:"99/99/9999",showOnFocus:!1}),le("trnxDate")]}),(0,S.jsxs)("div",{className:"field w-1/4 max-w-1/4",children:[(0,S.jsxs)("label",{htmlFor:"fromAcc",className:"block mb-2",children:[(0,S.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"From Account"]}),(0,S.jsx)(x.L,{inputId:"fromAcc",id:"fromAcc",name:"fromAcc",options:Y,optionLabel:"firmName",optionValue:"code",value:te.values.fromAcc,filter:!0,showClear:!0,filterBy:"code,firmName",filterPlaceholder:"Search group code or name",onChange:function(e){te.setFieldValue("fromAcc",e.value)},onBlur:te.handleBlur,placeholder:"Select Account",valueTemplate:se,itemTemplate:oe,required:!0,className:(0,v.AK)({"p-invalid":ce("fromAcc"),"p-inputtext-sm":!0}),style:{width:"100%"},disabled:!B||q,resetFilterOnHide:!0,ref:Q}),le("fromAcc")]}),(0,S.jsxs)("div",{className:"field",children:[(0,S.jsx)("label",{className:"block invisible",children:"."}),!q&&(0,S.jsx)(p.z,{type:"button",label:"Add Transaction",onClick:function(){ue(),(0,N.Ev)(M)},className:"w-1/2",disabled:!te.touched.trnxDate||!te.touched.fromAcc||!(!te.errors.trnxDate&&!te.errors.fromAcc)}),q&&(0,S.jsx)(p.z,{type:"button",label:"Change Account",onClick:function(){ue(),ie()},className:"w-1/2"})]})]}),(0,S.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,S.jsxs)("div",{className:"field w-1/4 max-w-1/4",children:[(0,S.jsxs)("label",{htmlFor:"toAcc",className:"block mb-2",children:[(0,S.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"To Account"]}),(0,S.jsx)(x.L,{inputId:"toAcc",id:"toAcc",name:"toAcc",options:Y,optionLabel:"firmName",optionValue:"code",value:te.values.toAcc,filter:!0,showClear:!0,filterBy:"code,firmName",filterPlaceholder:"Search group code or name",onChange:function(e){te.setFieldValue("toAcc",e.value)},onBlur:te.handleBlur,placeholder:"Select Account",valueTemplate:se,itemTemplate:oe,required:!0,className:(0,v.AK)({"p-invalid":ce("toAcc"),"p-inputtext-sm":!0}),style:{width:"100%"},disabled:!B||!q,resetFilterOnHide:!0,ref:M}),le("toAcc")]}),(0,S.jsxs)("div",{className:"field w-1/6",children:[(0,S.jsxs)("label",{htmlFor:"desc",className:"block mb-2",children:[(0,S.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Description"]}),(0,S.jsx)(h.o,{type:"text",name:"desc",id:"desc",value:te.values.desc,onChange:te.handleChange,onBlur:te.handleBlur,className:(0,v.AK)({"p-invalid":ce("desc"),"p-inputtext-sm":!0}),placeholder:"Description",required:!0,maxLength:10,disabled:!q}),le("desc")]}),(0,S.jsxs)("div",{className:"field w-1/6",children:[(0,S.jsx)("label",{htmlFor:"rno",className:"block mb-2",children:"Receipt No"}),(0,S.jsx)(h.o,{type:"text",name:"rno",id:"rno",value:te.values.rno,onChange:te.handleChange,onBlur:te.handleBlur,className:(0,v.AK)({"p-invalid":ce("rno"),"p-inputtext-sm":!0}),placeholder:"Receipt No",maxLength:10,disabled:!q}),le("rno")]}),(0,S.jsxs)("div",{className:"field w-1/6",children:[(0,S.jsxs)("label",{htmlFor:"received",className:"block mb-2",children:[(0,S.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Received Amount"]}),(0,S.jsx)(f.R,{id:"received",name:"received",value:te.values.received,onValueChange:te.handleChange,onBlur:te.handleBlur,className:(0,v.AK)({"p-invalid":ce("received"),"p-inputtext-sm":!0}),placeholder:"Received Amount",mode:"decimal",maxFractionDigits:2,min:0,max:1e7,locale:"en-IN",required:!0,disabled:!q}),le("received")]}),(0,S.jsxs)("div",{className:"field w-1/6",children:[(0,S.jsxs)("label",{htmlFor:"paid",className:"block mb-2",children:[(0,S.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Paid Amount"]}),(0,S.jsx)(f.R,{id:"paid",name:"paid",value:te.values.paid,onValueChange:te.handleChange,onBlur:te.handleBlur,className:(0,v.AK)({"p-invalid":ce("paid"),"p-inputtext-sm":!0}),placeholder:"Paid Amount",mode:"decimal",maxFractionDigits:2,min:0,max:1e7,locale:"en-IN",required:!0,disabled:!q}),le("paid")]}),(0,S.jsxs)("div",{className:"field",children:[(0,S.jsx)("label",{className:"block invisible",children:"."}),(0,S.jsx)(p.z,{type:"button",label:"Save",icon:"pi pi-save",onClick:te.submitForm})]})]})]}),G.length>0&&(0,S.jsx)("div",{children:(0,S.jsxs)(D.w,{value:G,size:"small",responsiveLayout:"scroll",showGridlines:!0,scrollable:!0,scrollHeight:"35vh",stripedRows:!0,children:[(0,S.jsx)(y.s,{field:"trnxDate",header:"Trnx. Date",body:function(e){return(0,N.p6)(new Date(e.trnxDate))}}),(0,S.jsx)(y.s,{field:"fromAcc",header:"From Acc"}),(0,S.jsx)(y.s,{field:"toAcc",header:"To Acc"}),(0,S.jsx)(y.s,{field:"desc",header:"Description"}),(0,S.jsx)(y.s,{field:"rno",header:"Receipt"}),(0,S.jsx)(y.s,{field:"received",header:"Received",align:"right",alignHeader:"left",body:function(e){return de(e,"received")}}),(0,S.jsx)(y.s,{field:"paid",header:"Paid",align:"right",alignHeader:"left",body:function(e){return de(e,"paid")}})]})})]})})};var E=function(){return(0,S.jsx)(a.Z5,{children:(0,S.jsxs)(a.AW,{path:"/",element:(0,S.jsx)(a.j3,{}),children:[(0,S.jsx)(a.AW,{path:"create",element:(0,S.jsx)(R,{})}),(0,S.jsx)(a.AW,{path:"edit/:id",element:(0,S.jsx)(R,{})})]})})}},8683:function(e,r,t){function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}t.d(r,{Z:function(){return i}})}}]);
//# sourceMappingURL=837.6a287103.chunk.js.map