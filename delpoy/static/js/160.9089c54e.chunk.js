"use strict";(self.webpackChunkaccounts_frontend=self.webpackChunkaccounts_frontend||[]).push([[160],{7699:function(e,t,n){n.d(t,{Fp:function(){return i},JS:function(){return r},Y_:function(){return o},bj:function(){return a},hQ:function(){return s}});var r="GROUP_LIST_REFRESH",s="ACCOUNT_LIST_REFRESH",o="TRANSACTION_LIST_REFRESH",i="BANK_TRANSACTION_LIST_REFRESH",a="USER_LIST_REFRESH"},5160:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(2791),s=n(6871),o=n(8683),i=n(5861),a=n(885),l=n(7757),c=n.n(l),u=n(5705),p=n(7953),d=n(4286),h=n(919),f=n(9025),m=n(5854),b=n(3014),v=n(3574);function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){if(t&&("object"===w(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var s=k(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return O(this,n)}}var R=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(i,e);var t,n,s,o=N(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={focused:!1},t.onClick=t.onClick.bind(j(t)),t.toggle=t.toggle.bind(j(t)),t.onFocus=t.onFocus.bind(j(t)),t.onBlur=t.onBlur.bind(j(t)),t.onKeyDown=t.onKeyDown.bind(j(t)),t.inputRef=(0,r.createRef)(t.props.inputRef),t}return t=i,n=[{key:"onClick",value:function(e){this.props.disabled||(this.toggle(e),this.inputRef.current.focus(),e.preventDefault())}},{key:"toggle",value:function(e){if(this.props.onChange){var t=this.isChecked()?this.props.falseValue:this.props.trueValue;this.props.onChange({originalEvent:e,value:t,stopPropagation:function(){},preventDefault:function(){},target:{name:this.props.name,id:this.props.id,value:t}})}}},{key:"onFocus",value:function(e){var t=this,n=e;this.setState({focused:!0},(function(){t.props.onFocus&&t.props.onFocus(n)}))}},{key:"onBlur",value:function(e){var t=this,n=e;this.setState({focused:!1},(function(){t.props.onBlur&&t.props.onBlur(n)}))}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&this.onClick(e)}},{key:"updateInputRef",value:function(){var e=this.props.inputRef;e&&("function"===typeof e?e(this.inputRef.current):e.current=this.inputRef.current)}},{key:"componentDidMount",value:function(){this.updateInputRef(),this.props.tooltip&&this.renderTooltip()}},{key:"componentDidUpdate",value:function(e){e.tooltip===this.props.tooltip&&e.tooltipOptions===this.props.tooltipOptions||(this.tooltip?this.tooltip.update(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({content:this.props.tooltip},this.props.tooltipOptions||{})):this.renderTooltip())}},{key:"componentWillUnmount",value:function(){this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)}},{key:"renderTooltip",value:function(){this.tooltip=(0,v.I)({target:this.container,content:this.props.tooltip,options:this.props.tooltipOptions})}},{key:"isChecked",value:function(){return this.props.checked===this.props.trueValue}},{key:"render",value:function(){var e=this,t=this.isChecked(),n=(0,m.AK)("p-inputswitch p-component",{"p-inputswitch-checked":t,"p-disabled":this.props.disabled,"p-inputswitch-focus":this.state.focused},this.props.className),s=m.gb.findDiffKeys(this.props,i.defaultProps);return r.createElement("div",y({ref:function(t){return e.container=t},id:this.props.id,className:n,style:this.props.style,onClick:this.onClick,role:"checkbox","aria-checked":t},s),r.createElement("div",{className:"p-hidden-accessible"},r.createElement("input",{ref:this.inputRef,type:"checkbox",id:this.props.inputId,name:this.props.name,checked:t,onChange:this.toggle,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,disabled:this.props.disabled,role:"switch","aria-checked":t,"aria-labelledby":this.props.ariaLabelledBy})),r.createElement("span",{className:"p-inputswitch-slider"}))}}],n&&g(t.prototype,n),s&&g(t,s),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);C(R,"defaultProps",{id:null,inputRef:null,style:null,className:null,inputId:null,name:null,checked:!1,trueValue:!0,falseValue:!1,disabled:!1,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,onChange:null,onFocus:null,onBlur:null});var S=n(715),D=n(31),E=n(3207),I=n(3829),_=n(1848),B=n(7699),F=n(7436),L=n(184),A=[{label:"2022-2023",value:"2022-2023"}];var q=function(){var e,t=(0,s.UO)(),n=(0,s.s0)(),l=(0,r.useState)(!0),v=(0,a.Z)(l,2),y=v[0],g=v[1],j=(0,r.useState)(!0),x=(0,a.Z)(j,2),w=x[0],O=x[1],k=(0,r.useContext)(F.Il),C=(0,u.TA)({initialValues:{_id:"",username:"",loginID:"",finYear:"",phone:"",status:E.J0.Active,password:"",cpassword:""},validationSchema:p.Ry({username:p.Z_().min(3,"Username must be 3 characters or more").max(30,"Username must be 30 characters or less").required("Username is required"),loginID:p.Z_().min(3,"Login ID must be 3 characters or more").max(15,"Login ID must be 15 characters or less").required("Login ID is required"),finYear:p.Z_().required("Financial year is required"),phone:p.Z_().min(10,"Phone number must be 10 characters").max(10,"Phone number must be 10 characters"),status:p.nK().oneOf([E.J0.Active,E.J0.Inactive]).required("Status is required"),password:p.Z_().min(7,"Password must be 7 characters or more").max(15,"Password must be 15 characters or less").required("Password is required"),cpassword:p.Z_().oneOf([p.iH("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(){var e=(0,i.Z)(c().mark((function e(t,n){var r,s,o,i,a,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.setErrors,null===k||void 0===k||k.setDisplayLoader(!0),s=Object.assign({},t),e.prev=3,!w){e.next=11;break}return delete s._id,e.next=8,(0,D.r4)(s);case 8:o=e.sent,e.next=16;break;case 11:return i=s._id,delete s._id,e.next=15,(0,D.Nq)(s,i);case 15:o=e.sent;case 16:null===k||void 0===k||k.setDisplayLoader(!1),a={title:"Success",message:o.data,type:I.Xo.SUCCESS,onClose:function(){P(!0)}},(0,I.wp)(a),e.next=31;break;case 21:if(e.prev=21,e.t0=e.catch(3),null===k||void 0===k||k.setDisplayLoader(!1),"string"!=typeof e.t0||!e.t0.includes("login ID already exists")){e.next=29;break}return r({loginID:"Login ID is already registered"}),e.abrupt("return");case 29:l={title:"Error",message:e.t0,type:I.Xo.ERROR},(0,I.wp)(l);case 31:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t,n){return e.apply(this,arguments)}}()});(0,r.useEffect)((function(){if(t.id){O(!1);var e=function(){var e=(0,i.Z)(c().mark((function e(){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,D.PR)(t.id);case 3:n=e.sent,C.setValues((0,o.Z)((0,o.Z)({},n.data),{},{password:"",cpassword:""})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r={title:"Error",message:e.t0,type:I.Xo.ERROR},(0,I.wp)(r);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}else O(!0)}),[t.id]);var P=function(e){e&&_.YB.dispatch(B.bj),g(!1),n(-1)},N=(0,L.jsxs)("div",{children:[(0,L.jsx)(h.z,{label:"Close",icon:"pi pi-times",onClick:function(){return P()}}),(0,L.jsx)(h.z,{type:"button",label:"Save",icon:"pi pi-save",onClick:C.submitForm,disabled:!C.isValid})]}),q=function(e){return!(!C.touched[e]||!C.errors[e])},T=function(e){return q(e)&&(0,L.jsx)("small",{className:"p-error",children:C.errors[e]})};return(0,L.jsx)(d.V,{visible:y,modal:!0,closeOnEscape:!1,header:"User - ".concat(w?"Create":"Edit"),footer:N,onHide:P,style:{width:"30%"},blockScroll:!0,children:(0,L.jsx)("div",{className:"p-2",children:(0,L.jsxs)("form",{className:"p-fluid",children:[(0,L.jsxs)("div",{className:"field mb-4",children:[(0,L.jsxs)("label",{htmlFor:"username",className:"block mb-2",children:[(0,L.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Username"]}),(0,L.jsx)(f.o,{type:"text",name:"username",id:"username",value:C.values.username,onChange:C.handleChange,onBlur:C.handleBlur,className:(0,m.AK)({"p-invalid":q("username"),"p-inputtext-sm":!0}),placeholder:"Username",autoFocus:!0,required:!0,minLength:3,maxLength:30,disabled:!w}),T("username")]}),(0,L.jsxs)("div",{className:"field mb-4",children:[(0,L.jsxs)("label",{htmlFor:"loginID",className:"block mb-2",children:[(0,L.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Login ID"]}),(0,L.jsx)(f.o,{type:"text",name:"loginID",id:"loginID",value:C.values.loginID,onChange:C.handleChange,onBlur:C.handleBlur,className:(0,m.AK)({"p-invalid":q("loginID"),"p-inputtext-sm":!0}),placeholder:"Login ID",required:!0,maxLength:15,disabled:!w}),T("loginID")]}),(0,L.jsxs)("div",{className:"field mb-4",children:[(0,L.jsxs)("label",{htmlFor:"password",className:"block mb-2",children:[(0,L.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Password"]}),(0,L.jsx)(f.o,{type:"password",name:"password",id:"password",value:C.values.password,onChange:C.handleChange,onBlur:C.handleBlur,className:(0,m.AK)({"p-invalid":q("password"),"p-inputtext-sm":!0}),placeholder:"Password",required:!0,minLength:7,maxLength:15}),T("password")]}),(0,L.jsxs)("div",{className:"field mb-4",children:[(0,L.jsxs)("label",{htmlFor:"cpassword",className:"block mb-2",children:[(0,L.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Confirm Password"]}),(0,L.jsx)(f.o,{type:"password",name:"cpassword",id:"cpassword",value:C.values.cpassword,onChange:C.handleChange,onBlur:C.handleBlur,className:(0,m.AK)({"p-invalid":q("cpassword"),"p-inputtext-sm":!0}),placeholder:"Confirm Password",required:!0,minLength:7,maxLength:15}),T("cpassword")]}),(0,L.jsxs)("div",{className:"field mb-4",children:[(0,L.jsx)("label",{htmlFor:"phone",className:"block mb-2",children:"Phone"}),(0,L.jsx)(S.v,{type:"text",name:"phone",id:"phone",mask:"9999999999",slotChar:"",unmask:!0,autoClear:!1,value:C.values.phone,onChange:C.handleChange,onBlur:C.handleBlur,className:(0,m.AK)({"p-invalid":q("phone"),"p-inputtext-sm":!0}),placeholder:"Phone"}),T("phone")]}),(0,L.jsxs)("div",{className:"field mb-4",children:[(0,L.jsxs)("label",{htmlFor:"finYear",className:"block mb-2",children:[(0,L.jsx)("span",{className:"text-[#e24c4c]",children:"*"}),"Financial Year"]}),(0,L.jsx)(b.L,{inputId:"finYear",name:"finYear",id:"finYear",options:A,optionLabel:"label",optionValue:"value",value:C.values.finYear,onChange:C.handleChange,onBlur:C.handleBlur,placeholder:"Select Financial Year",className:(0,m.AK)({"p-invalid":q("finYear")}),required:!0,disabled:!w}),T("finYear")]}),(0,L.jsxs)("div",{className:"field",children:[(0,L.jsx)("label",{htmlFor:"status",className:"block mb-2",children:"Status"}),(0,L.jsxs)("div",{className:"flex align-middle gap-4",children:[(0,L.jsx)(R,{inputId:"status",name:"status",id:"status",checked:C.values.status,trueValue:E.J0.Active,falseValue:E.J0.Inactive,onChange:function(e){return C.setFieldValue("status",e.value)},onBlur:C.handleBlur}),null===(e=(0,E.Tq)(C.values.status))||void 0===e?void 0:e.toUpperCase()]})]})]})})})};var T=function(){return(0,L.jsx)(s.Z5,{children:(0,L.jsxs)(s.AW,{path:"/",element:(0,L.jsx)(s.j3,{}),children:[(0,L.jsx)(s.AW,{path:"create",element:(0,L.jsx)(q,{})}),(0,L.jsx)(s.AW,{path:"edit/:id",element:(0,L.jsx)(q,{})})]})})}},8683:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,{Z:function(){return o}})}}]);
//# sourceMappingURL=160.9089c54e.chunk.js.map